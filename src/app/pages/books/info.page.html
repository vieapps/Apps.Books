<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button></ion-back-button>
		</ion-buttons>
		<ion-title>
			{{ title }}
		</ion-title>
	</ion-toolbar>
</ion-header>

<ion-content>

	<h1 padding-horizontal padding-top>
		{{ book.Title }}
	</h1>

	<section padding>
		<figure padding-bottom>
			<img [src]="book.Cover" />
		</figure>
		<div>
			<ion-list>
				<ion-item *ngIf="book.Original !== ''">
					<span>
						{{ resources.original }}:
					</span>
					<label>
						{{ book.Original }}
					</label>
				</ion-item>
				<ion-item>
					<span>
						{{ resources.author }}:
					</span>
					<label>
						{{ book.Author }}
					</label>
				</ion-item>
				<ion-item *ngIf="book.Translator !== ''">
					<span>
						{{ resources.translator }}:
					</span>
					<label>
						{{ book.Translator }}
					</label>
				</ion-item>
				<ion-item *ngIf="book.Publisher !== ''">
					<span>
						{{ resources.publisher }}:
					</span>
					<label>
						{{ book.Publisher }}
					</label>
				</ion-item>
				<ion-item *ngIf="book.Producer !== ''">
					<span>
						{{ resources.producer }}:
					</span>
					<label>
						{{ book.Producer }}
					</label>
				</ion-item>
				<ion-item *ngIf="book.TotalChapters > 1">
					<span>
						{{ resources.chapters }}:
					</span>
					<label>
						{{ book.TotalChapters | number:'':locale }}
					</label>
				</ion-item>
				<ion-item>
					<span>
						{{ resources.category }}:
					</span>
					<label>
						{{ book.Category }}
					</label>
				</ion-item>
				<ion-item *ngIf="book.Source !== ''">
					<span>
						{{ resources.source }}:
					</span>
					<label *ngIf="!sourceUrl">
						{{ book.Source }}
					</label>
					<label *ngIf="sourceUrl">
						<a [href]="sourceUrl" target="_blank">
							{{ book.Source }}
						</a>
					</label>
				</ion-item>
				<ion-item>
					<span>
						{{ resources.updated }}:
					</span>
					<label>
						{{ book.LastUpdated | date: 'h:mm a @ d/M/y' }}
					</label>
				</ion-item>
				<ion-item>
					<div padding-top>
						<section>
							e-Books:
						</section>
						<ul class="files">
							<li>
								<span>
									EPUB: {{ book.Files.Epub.Size }}
								</span>
								<ion-icon *ngIf="book.Files.Epub.Size != 'generating...'" name="download" slot="icon-only" [title]="resources.download" (click)="downloadAsync('Epub')" float-end></ion-icon>
							</li>
							<li>
								<span>
									MOBI: {{ book.Files.Mobi.Size }}
								</span>
								<ion-icon *ngIf="book.Files.Mobi.Size != 'generating...'" name="download" slot="icon-only" [title]="resources.download" (click)="downloadAsync('Mobi')" float-end></ion-icon>
							</li>
						</ul>
					</div>
				</ion-item>
			</ion-list>
		</div>
	</section>

	<section class="qrcode" padding>
		<div padding-bottom>
			<span>
				{{ resources.qrcode.header }}
			</span>
			<div>
				<qr-code [value]="qrcode" [size]="290"></qr-code>
			</div>
			<label>
				{{ resources.qrcode.description }}
			</label>
		</div>
		<div>
			<ion-list>
				<ion-item *ngIf="statistics.views">
					<div>
						<section>
							{{ resources.statistics.views }}:
						</section>
						<ul>
							<li>
								<span>
									{{ resources.statistics.total }}:
								</span>
								<label>
									{{ statistics.views.Total | number:'':locale }}
								</label>
							</li>
							<li>
								<span>
									{{ resources.statistics.month }}:
								</span>
								<label>
									{{ statistics.views.Month | number:'':locale }}
								</label>
							</li>
							<li>
								<span>
									{{ resources.statistics.week }}:
								</span>
								<label>
									{{ statistics.views.Week | number:'':locale }}
								</label>
							</li>
						</ul>
					</div>
				</ion-item>
				<ion-item *ngIf="statistics.downloads">
					<div padding-top>
						<section>
							{{ resources.statistics.downloads }}:
						</section>
						<ul>
							<li>
								<span>
									{{ resources.statistics.total }}:
								</span>
								<label>
									{{ statistics.downloads.Total | number:'':locale }}
								</label>
							</li>
							<li>
								<span>
									{{ resources.statistics.month }}:
								</span>
								<label>
									{{ statistics.downloads.Month | number:'':locale }}
								</label>
							</li>
							<li>
								<span>
									{{ resources.statistics.week }}:
								</span>
								<label>
									{{ statistics.downloads.Week | number:'':locale }}
								</label>
							</li>
						</ul>
					</div>
				</ion-item>
			</ion-list>
		</div>
	</section>

	<section padding-vertical>
		<ion-item>
			<ion-label position="stacked">
				{{ resources.link }}:
			</ion-label>
			<ion-input #link [value]="uri" readonly></ion-input>
			<ion-button slot="end" fill="clear" (click)="copyLinkAsync()">
				<ion-icon name="copy" color="medium" slot="icon-only"></ion-icon>
			</ion-button>
		</ion-item>
	</section>

</ion-content>